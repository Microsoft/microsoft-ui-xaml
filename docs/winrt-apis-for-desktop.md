# WinRT API changes for Desktop apps

In WinUI 3 Preview 4, we have made changes to the way Windowing works in Desktop apps, by no longer creating a CoreWindow or CoreApplicationView. As a result, all WinRT APIs dependent on CoreWindow will no longer work in Desktop apps. This document will list out APIs that have been affected by this change, with replacement or workaround APIs that will allow you to achieve the same functionality. 

This doc will continue to be updated as our community files bugs and as we identify more workarounds/replacements. If you are encountering issues with an API not listed here, please go ahead and [file a bug](https://github.com/microsoft/microsoft-ui-xaml/issues/new?assignees=&labels=&template=bug_report.md&title=) on this repo with the API in question and what you are trying to achieve by using it. 

| WinRT API                                                                  | Replacement or Workaround                 | Notes                                             |
|----------------------------------------------------------------------------|-------------------------------------------|---------------------------------------------------|
| [`ApplicationViewTitleBar.ExtendViewIntoTitleBar`](https://docs.microsoft.com/en-us/uwp/api/windows.applicationmodel.core.coreapplicationviewtitlebar.extendviewintotitlebar?view=winrt-19041)                            | `Window.ExtendsContentIntoTitleBar`        |  API reference documentation coming soon. This is a permanent replacement for WinUI 3.                                                |
| [`CoreWindow.GetForCurrentThread().GetKeyState()`]((https://docs.microsoft.com/en-us/uwp/api/windows.ui.core.corewindow.getkeystate?view=winrt-19041) )                             | [`KeyboardInput.GetKeyStateForCurrentThread`](https://docs.microsoft.com/en-us/windows/winui/api/microsoft.ui.input.keyboardinput.getkeystateforcurrentthread?view=winui-3.0-preview) |                                                   |
| [`Window.Current.CoreWindow.GetKeyState`](https://docs.microsoft.com/en-us/uwp/api/windows.ui.core.corewindow.getkeystate?view=winrt-19041)                                      | [`KeyboardInput.GetKeyStateForCurrentThread`](https://docs.microsoft.com/en-us/windows/winui/api/microsoft.ui.input.keyboardinput.getkeystateforcurrentthread?view=winui-3.0-preview) |                                                   |
| [`DisplayInformation.GetForCurrentView().LogicalDpi`](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.display.displayinformation.logicaldpi?view=winrt-19041) | [`XamlRoot.RasterizationScale`](https://docs.microsoft.com/en-us/windows/winui/api/microsoft.ui.xaml.xamlroot.rasterizationscale?view=winui-3.0-preview)               | Listen for changes on the `XamlRoot.Changed` event. |
| [`Window.Dispatcher`](https://docs.microsoft.com/en-us/windows/winui/api/microsoft.ui.xaml.window.dispatcher?view=winui-3.0-preview) or [`CoreDispatcher`](https://docs.microsoft.com/en-us/uwp/api/windows.ui.core.coredispatcher?view=winrt-19041)                                               | [`DispatcherQueue`](https://docs.microsoft.com/en-us/windows/winui/api/microsoft.ui.xaml.window.dispatcherqueue?view=winui-3.0-preview)                           | DispatcherQueue is the permanent WinUI 3 replacement for Dispatcher and CoreDispatcher.
| [`UIViewSettings.GetForCurrentView()`](https://docs.microsoft.com/en-us/uwp/api/windows.ui.viewmanagement.uiviewsettings.getforcurrentview?view=winrt-19041)  |                 | No alternative - this functionality is not intended to be supported in Desktop apps.  |
| [`SystemNavigationManager.GetForCurrentView()`](https://docs.microsoft.com/en-us/uwp/api/windows.ui.core.systemnavigationmanager.getforcurrentview?view=winrt-19041)            |                 | No alternative -  this functionality is not intended to be supported in Desktop apps.  |